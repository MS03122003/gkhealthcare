{% extends "base.html" %}

{% block title %}Add Vendor - LeadMaster Pro{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">
        <i class="fas fa-truck me-2"></i>Add Vendor
    </h1>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'dashboard' %}"><i class="fas fa-home"></i></a></li>
            <li class="breadcrumb-item"><a href="{% url 'vendor_list' %}">Vendors</a></li>
            <li class="breadcrumb-item active" aria-current="page">Add Vendor</li>
        </ol>
    </nav>
</div>

<!-- Display Messages -->
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            <i class="fas {% if message.tags == 'success' %}fa-check-circle{% else %}fa-exclamation-triangle{% endif %} me-2"></i>
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endfor %}
{% endif %}

<div class="row justify-content-center">
    <div class="col-xl-8 col-lg-10">
        <div class="card shadow-sm">
            <div class="card-header bg-warning text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-truck me-2"></i>Vendor Information
                </h5>
            </div>
            <div class="card-body">
                <form method="post" action="{% url 'save_vendor' %}" class="needs-validation" novalidate>
                    {% csrf_token %}

                    <!-- Company & Vendor -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="vendor_id" class="form-label">
                                <i class="fas fa-id-badge me-1"></i>Vendor ID
                            </label>
                            <input type="text" class="form-control" id="vendor_id" name="vendor_id" placeholder="Enter vendor ID" required>
                            <div class="invalid-feedback">Please provide a vendor ID.</div>
                        </div>
                        <div class="col-md-6">
                            <label for="company_name" class="form-label">
                                <i class="fas fa-building me-1"></i>Company Name
                            </label>
                            <input type="text" class="form-control" id="company_name" name="company_name" placeholder="Enter company name">
                        </div>
                    
                        <div class="col-md-6">
                            <label for="vendor_name" class="form-label">
                                <i class="fas fa-user me-1"></i>Vendor Name <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="vendor_name" name="vendor_name" placeholder="Enter vendor name" required>
                            <div class="invalid-feedback">Please provide a vendor name.</div>
                        </div>
                    </div>

                    <!-- Phone Numbers -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="phone_number" class="form-label">
                                <i class="fas fa-phone me-1"></i>Phone Number <span class="text-danger">*</span>
                            </label>
                            <input type="tel" class="form-control" id="phone_number" name="phone_number" placeholder="Enter phone number" required>
                            <div class="invalid-feedback">Please provide a phone number.</div>
                        </div>
                        <div class="col-md-6">
                            <label for="phone_number_2" class="form-label">
                                <i class="fas fa-phone me-1"></i>Phone Number 2
                            </label>
                            <input type="tel" class="form-control" id="phone_number_2" name="phone_number_2" placeholder="Enter alternate number">
                        </div>
                    </div>

                    <!-- Email & GSTIN -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="email" class="form-label"><i class="fas fa-envelope me-1"></i>Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Enter email">
                        </div>
                        <div class="col-md-6">
                            <label for="gstin" class="form-label"><i class="fas fa-file-invoice me-1"></i>GSTIN</label>
                            <input type="text" class="form-control" id="gstin" name="gstin" placeholder="Enter GSTIN">
                        </div>
                    </div>

                    <!-- Address -->
                    <h6 class="mt-4 mb-3 text-warning"><i class="fas fa-map-marker-alt me-2"></i>Address Information</h6>
                    <div class="mb-3">
                        <label for="address_line_1" class="form-label">Address Line 1</label>
                        <textarea class="form-control" id="address_line_1" name="address_line_1" rows="2" placeholder="Enter address line 1"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="address_line_2" class="form-label">Address Line 2</label>
                        <textarea class="form-control" id="address_line_2" name="address_line_2" rows="2" placeholder="Enter address line 2"></textarea>
                    </div>

                    <!-- City, State, Pincode -->
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label for="city" class="form-label"><i class="fas fa-city me-1"></i>City</label>
                            <input type="text" class="form-control" id="city" name="city" placeholder="Enter city">
                        </div>
                        <div class="col-md-4">
                            <label for="state" class="form-label"><i class="fas fa-flag me-1"></i>State</label>
                            <input type="text" class="form-control" id="state" name="state" placeholder="Enter state">
                        </div>
                        <div class="col-md-4">
                            <label for="pincode" class="form-label"><i class="fas fa-map-pin me-1"></i>Pincode</label>
                            <input type="text" class="form-control" id="pincode" name="pincode" placeholder="Enter pincode">
                        </div>
                    </div>

                    <!-- Website -->
                    <div class="mb-4">
                        <label for="company_website" class="form-label"><i class="fas fa-globe me-1"></i>Company Website</label>
                        <input type="url" class="form-control" id="company_website" name="company_website" placeholder="https://example.com">
                    </div>

                    <!-- Form Actions -->
                    <div class="d-flex justify-content-between">
                        <a href="{% url 'vendor_list' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-2"></i>Back to List
                        </a>
                        <div>
                            <button type="reset" class="btn btn-outline-warning me-2">
                                <i class="fas fa-undo me-2"></i>Reset
                            </button>
                            <button type="submit" class="btn btn-warning">
                                <i class="fas fa-save me-2"></i>Save Vendor
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Styles -->
<style>
    .form-control:focus {
        border-color: #078bff;
        box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.25);
    }
    .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .card-header.bg-warning {
        background-color: #ffc107 !important;
        color: #212529 !important;
    }
    .text-warning {
        color: #ffc107 !important;
    }
</style>

<!-- Scripts -->
<script>
(function() {
    'use strict';
    window.addEventListener('load', function() {
        const forms = document.getElementsByClassName('needs-validation');
        Array.from(forms).forEach(function(form) {
            form.addEventListener('submit', function(event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    }, false);
})();

document.getElementById('phone_number').addEventListener('input', e => {
    let value = e.target.value.replace(/\D/g, '').slice(0, 10);
    e.target.value = value;
});
document.getElementById('phone_number_2').addEventListener('input', e => {
    let value = e.target.value.replace(/\D/g, '').slice(0, 10);
    e.target.value = value;
});
document.getElementById('gstin').addEventListener('input', e => {
    e.target.value = e.target.value.toUpperCase();
});
</script>
{% endblock %}